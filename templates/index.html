<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Sign Up Â· UoB BJJ{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    {% for row in event_data %}
    {% if row['registered'] %}
    <div class="col-12 col-md-6 col-lg-4">
      <div class="row rounded m-auto p-1 border mt-3 registered_event">
        <h2>{{ row['event_name'] }}</h2>
        <h5>{{ row['date'] }}</h5>
        <hr class="m-0">
        <div class="col-6">
          {{ row['start_time'] }} - {{ row['end_time'] }}
        </div>
        <div class="col-6">
          <i class="bi bi-geo-alt-fill"></i><a href="{{ row['location_link'] }}" class="text-white" target="_blank">{{ row['location'] }}</a><br>
          {{ row['capacity'] }} Spaces available
        </div>
        <input type="hidden" name="event_id" id="event_id" value="{{ row['event_id'] }}">
        <button type="submit" class="btn btn-success" disabled>Signed up</button>
      </div>
    </div>
    {% else %}
    <div class="col-12 col-md-6 col-lg-4">
      <form action="{{  url_for('class_sign_up') }}" method="GET">
      <div class="row rounded m-auto p-1 border mt-3 event">
        <h2>{{ row['event_name'] }}</h2>
        <h5>{{ row['date'] }}</h5>
        <hr class="m-0">
        <div class="col-6">
          {{ row['start_time'] }} - {{ row['end_time'] }}
        </div>
        <div class="col-6">
          <i class="bi bi-geo-alt-fill"></i><a href="{{ row['location_link'] }}" class="text-white" target="_blank">{{ row['location'] }}</a><br>
          {{ row['capacity'] }} Spaces available
        </div>
        <input type="hidden" name="event_id" id="event_id" value="{{ row['event_id'] }}">
        {% if row['capacity'] == 0 %}
          <button type="button" class="btn btn-warning" disabled>Fully booked</button>
        {% else %}
          <button type="submit" class="btn btn-warning">Sign up</button>
        {% endif %}
      </div>
    </div>
    </form>
    {% endif %}
    {% endfor %}
  </div>
</div>
{% endblock %}
